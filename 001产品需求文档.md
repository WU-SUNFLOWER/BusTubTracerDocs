# BusTubTracer 产品需求

开发小组：A7小组（BusTracer Project）

编写日期：2024.11.16

# 产品概述

BusTubTracer是一款面向初学RDBMS（关系型数据库管理系统）底层原理的计算机类/电子信息类专业学生的工具类应用。

BusTubTracer基于美国卡内基梅隆大学推出的教学型开源关系型数据库BusTub进行二次开发，提供可交互的图形化前端界面，通过图表等形式向学生展示BusTub中关键的数据结构和工作流程，旨在帮助学生更好地理解RDBMS内部实现原理。

# 需求整理

## 目标用户

本产品主要面向初学RDBMS底层原理和设计思想的计算机类专业学生。

在使用本产品前，他们应该已经了解了有关关系型数据库的基本概念（例如数据表、记录、字段等）和简单的SQL命令，并且对BusTub教学型数据库的基本架构有初步的了解。

## 用户需求（诉求）分析

本组组员通过结合自身在大二学习数据库系统的经历，以及与身边计算机类/电子信息类专业同学询问交流等方式，归纳提炼了**本产品所需要解决的如下关键用户需求（诉求）**：

- 用户希望通过可交互的图形化界面，直观了解当他在RDBMS中**执行一条SQL命令**后，该命令是如何被RDBMS进行执行的，执行的每个阶段又是怎样的。

- 用户希望通过可交互的图形化界面，直观了解在RDBMS中**数据表中的记录**是如何在内存（磁盘）中以二进制数据的形式被储存和表示的。

- 用户希望通过可交互的图形化界面，直观了解在RDBMS内部**数据表索引**是以何种数据结构进行组织和管理的。

## 关键开发需求汇总

### BusTub SQL Execution层内部工作过程展示

1. 展示BusTub数据库系统在正式解释执行SQL命令前生成的`Planner Tree`。
2. 展示BusTub数据库系统在正式将`Planner Tree`转化为`Executor Tree`前，经由优化器处理所得的`Optimized Planner Tree`。
3. 展示BusTub数据库系统根据`Optimized Planner Tree`生成的`Executor Tree`，以及在自叶节点向根节点遍历回溯该树过程中，每个节点的输入/输出情况。

通过对上述内容的可视化展示，能够使学生直观感受实际的数据库系统是如何将SQL命令抽象为树形结构，以及如何通过回溯遍历树的方式一步步得到SQL命令的查询结果。

### BusTub Storage层内部存储存储结构展示

1. 展示BusTub中将多个内存页组织为一张完整数据表所采用的数据结构`Table Heap`（双向链表）。
2. 展示BusTub中一张内存页的内部逻辑结构（分为`Table Header`、`Free Space`和`Tuple Array`）以及这些结构在单张内存页中所占用的字节大小。
3. 展示BusTub中每个`Tuple`（记录）实体所包含的关键内部属性，和该`Tuple`中每个字段的数据信息中。
4. 展示BusTub中`Buffer Pool`中缓存内存页的分配和使用情况，包括某张内存页是否空闲、是否为脏页等关键信息。

通过对上述内容的可视化展示，能够使得学生直观感受到实际数据库系统中为组织一张逻辑上完整的数据表所采用的层次化结构（完整的数据表->`Table Info`->`Table Heap`->`Table Page`->`Tuple`->`Value`）。

### BusTub Index Manager内部数据结构展示

1. 展示BusTub中实际建立的数据表索引是如何通过B+树进行组织和存储的。
2. 展示BusTub中数据库索引B+树上每个节点的内部属性和所储存的信息。
3. 展示BusTub中数据库索引B+树上的叶子节点是如何与数据表中的实际记录建立联系的。

通过对上述内容的可视化展示，能够使学生直观感受到数据库系统中索引机制的工作原理。